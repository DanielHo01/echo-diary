# 实施计划

## MVP（最小可行产品）

### 目标

快速验证核心功能，获取用户反馈。

### MVP 功能范围

| 功能 | 优先级 | 预计工时 | 说明 |
|-----|--------|---------|------|
| **P0 - 核心功能** | | | |
| 事件记录 | 🔴 必须 | 1 天 | 添加事件、时间轴展示、编辑 |
| AI 采访 | 🔴 必须 | 0.5 天 | 问题生成、选项交互 |
| 日记生成 | 🔴 必须 | 1 天 | 基于事件+采访生成日记 |
| **P1 - 重要功能** | | | |
| 语音识别 | 🟡 推荐 | 0.5 天 | 语音输入事件 |
| 日记保存 | 🟡 推荐 | 0.5 天 | 保存到 localStorage |
| 日记列表 | 🟡 推荐 | 0.5 天 | 查看历史日记 |

## 详细实施计划

### 第一阶段：基础设施（1-2 天）

#### Day 1: 项目初始化

- [ ] 使用 Vite 创建 React TypeScript 项目
- [ ] 安装核心依赖（React Router, Tailwind CSS, Headless UI）
- [ ] 配置 TypeScript 严格模式
- [ ] 配置路径别名（@/ → src/）
- [ ] 配置基础 ESLint + Prettier

#### Day 2: 代码质量工具

- [ ] 配置 Husky + lint-staged
- [ ] 配置 commitlint（提交规范）
- [ ] 配置 GitHub Actions CI/CD
- [ ] 配置 PWA 基础设置
- [ ] 添加单元测试基础（Vitest）

### 第二阶段：UI 组件库（2-3 天）

#### Day 3: 原子组件

- [ ] Button 组件（4种变体：primary, secondary, ghost, danger）
- [ ] Input 组件（支持前缀图标、错误状态）
- [ ] Card 组件（基础卡片样式）
- [ ] Modal 组件（对话框）
- [ ] Tabs 组件（标签切换）

#### Day 4: 布局组件

- [ ] Layout 组件（主布局框架）
- [ ] Header 组件（顶部导航）
- [ ] Sidebar 组件（侧边栏 - 时间轴）
- [ ] 响应式设计适配

#### Day 5: 设计系统

- [ ] 配置 Tailwind CSS 4.x 主题变量
- [ ] 定义颜色系统（主色、语义色、情绪色）
- [ ] 定义字体系统
- [ ] 定义间距和圆角系统

### 第三阶段：核心功能 - MVP（5-7 天）

#### Day 6-7: 事件系统

- [ ] 定义 Event 数据模型（TypeScript）
- [ ] 创建 EventContext 状态管理
- [ ] 实现事件 CRUD 操作
- [ ] 实现时间轴 UI 组件
- [ ] 实现事件编辑功能

#### Day 8: AI 采访系统

- [ ] 创建 AI Service（硅基流动 API 封装）
- [ ] 实现采访问题生成 Prompt
- [ ] 创建 InterviewPanel 组件
- [ ] 实现多选题交互
- [ ] 实现开放题回答

#### Day 9: 语音识别系统

- [ ] 创建 Speech Service
- [ ] 实现语音输入 UI
- [ ] 集成硅基流动 SenseVoice API
- [ ] 实现录音和识别功能

#### Day 10-11: 日记生成系统

- [ ] 定义 Diary 数据模型
- [ ] 创建 DiaryContext 状态管理
- [ ] 实现日记生成 Prompt
- [ ] 创建 DiaryEditor 组件
- [ ] 实现日记保存功能
- [ ] 实现多风格选择（温暖/诗意/简洁/理性）

#### Day 12: 日记列表系统

- [ ] 创建日记列表页面
- [ ] 实现日期筛选
- [ ] 实现标签搜索
- [ ] 实现卡片网格展示

#### Day 13: MVP 集成测试

- [ ] 端到端功能测试
- [ ] 性能优化
- [ ] 错误处理
- [ ] 文档编写
- [ ] 发布第一个 MVP 版本

## 里程碑

### M1: 项目初始化完成 ✅
**目标**：完成基础设施配置

- [ ] 代码质量工具配置完成
- [ ] CI/CD 配置完成
- [ ] 项目结构创建完成

### M2: UI 组件库完成 ✅
**目标**：完成基础 UI 组件

- [ ] 原子组件完成（Button, Input, Card, Modal, Tabs）
- [ ] 布局组件完成（Layout, Header, Sidebar）
- [ ] 设计系统配置完成

### M3: MVP 完成 ✅
**目标**：核心功能可用

- [ ] 事件系统完成（CRUD + 时间轴）
- [ ] AI 采访系统完成
- [ ] 语音识别完成
- [ ] 日记生成完成
- [ ] 日记列表完成

## 增强功能（后续阶段）

| 功能 | 优先级 | 预计工时 | 说明 |
|-----|--------|---------|------|
| 日记详情页面 | P1 | 1 天 | 查看完整日记、编辑、删除 |
| 主题切换 | P1 | 1 天 | 暗色/浅色/系统跟随 |
| 数据导出 | P2 | 1 天 | 导出 JSON |
| 追问机制 | P2 | 2 天 | AI 追问用户 |
| 标签系统 | P2 | 2 天 | 日记标签管理 |
| 搜索功能 | P2 | 2 天 | 按标题/内容/标签搜索 |
| 数据导入 | P2 | 1 天 | 导入 JSON |
| 本地备份 | P2 | 1 天 | IndexedDB 备份 |

## 风险与缓解

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| API Key 暴露 | 安全风险 | 提示用户设置访问限制 |
| AI 服务不稳定 | 功能不可用 | 添加错误提示和重试机制 |
| 语音识别不准确 | 用户体验差 | 提供手动编辑入口 |
| localStorage 满 | 数据丢失 | 监控存储使用，及时清理 |
| 移动端兼容性 | 用户流失 | 充分测试，渐进增强 |

## 成功标准

### MVP 成功标准

- [ ] 用户可以添加事件（文字/语音）
- [ ] AI 可以基于事件生成采访问题
- [ ] 用户可以回答采访问题
- [ ] AI 可以生成结构化日记
- [ ] 日记可以保存到历史
- [ ] 用户可以查看历史日记

### 性能成功标准

- [ ] 首屏加载时间 < 3s
- [ ] 包体积 < 200KB（gzip）
- [ ] Lighthouse 分数 > 80

## 资源链接

- [硅基流动 API 文档](https://cloud.siliconflow.cn/)
- [React 文档](https://react.dev/)
- [Tailwind CSS 文档](https://tailwindcss.com/)
- [Vite 文档](https://vitejs.dev/)
- [React Router 文档](https://reactrouter.com/)
- [Vitest 文档](https://vitest.dev/)
